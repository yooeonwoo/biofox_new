# BIOFOX KOL 시스템 미구현 기능 PRD (Product Requirements Document)

## 개요
이 문서는 BIOFOX KOL 시스템의 현재 구현 상태를 분석하여 아직 구현되지 않은 기능들을 정리하고, 각 기능의 구현 요구사항을 정의합니다.

## 현재 구현 상태 요약

### ✅ 구현 완료된 기능
1. **기본 인프라**
   - Supabase 데이터베이스 스키마 구축
  

2. **관리자 기능**
   - 사용자 관리 (조회, 승인, 권한 변경)
   - 주문 관리 (CRUD, 대량 가져오기, 수수료 계산)
   - 기기 판매 관리 (등록, 수정, 티어 관리)
   - 수수료 관리 (계산, 조정, 지급)
   - 임상 데이터 관리 (케이스 관리, 사진 관리, 대시보드)
   - 관계도 관리 (소속 관계 설정, 변경, 이력 조회)

3. **KOL/OL 기능**
   - 대시보드 (매출, 수수료, 전문점 현황)
   - 임상 사진 관리
   - 알림 시스템
   - 매출 일지

## 🚫 미구현 기능 목록

### 1. CRM 관리 시스템

#### 1.1 CRM 카드 관리
**현재 상태**: 데이터베이스 스키마는 있으나 UI와 API가 없음

**필요한 구현 사항**:
- [ ] CRM 카드 CRUD API 개발
  - POST `/api/crm/cards` - 새 CRM 카드 생성
  - GET `/api/crm/cards` - CRM 카드 목록 조회
  - GET `/api/crm/cards/:id` - 특정 CRM 카드 조회
  - PUT `/api/crm/cards/:id` - CRM 카드 수정
  - DELETE `/api/crm/cards/:id` - CRM 카드 삭제

- [ ] CRM 카드 UI 컴포넌트 개발
  - CRM 카드 목록 페이지
  - CRM 카드 상세/편집 모달
  - 단계별 진행 상황 표시 UI
  - 특이사항 질문 체크리스트

- [ ] 자동 연동 기능
  - CRM 카드 생성 시 셀프성장 카드 자동 생성
  - 설치교육 정보 양방향 동기화
  - 자가평가 결과 연동 (Q1~Q4)

#### 1.2 셀프성장 카드 시스템
**현재 상태**: 전혀 구현되지 않음

**필요한 구현 사항**:
- [ ] Shop Owner용 셀프성장 카드 API
  - GET `/api/shop/self-growth-card` - 본인 카드 조회
  - PUT `/api/shop/self-growth-card` - 카드 업데이트

- [ ] Shop Owner용 UI 페이지
  - 셀프성장 진도 체크 페이지
  - 자가평가 입력 폼
  - 교육 신청/확인 UI

### 2. 교육 관리 시스템

#### 2.1 본사실무교육 관리
**현재 상태**: 구현되지 않음

**필요한 구현 사항**:
- [ ] 교육 신청 API
  - POST `/api/education/apply` - 교육 신청
  - GET `/api/education/schedule` - 교육 일정 조회
  - PUT `/api/education/complete` - 교육 완료 처리

- [ ] 교육 관리 UI
  - 교육 일정 캘린더
  - 교육 신청 폼
  - 교육 이수 현황 대시보드

### 3. Shop Owner 전용 기능

#### 3.1 Shop Owner 대시보드
**현재 상태**: 기본 페이지 구조만 있음

**필요한 구현 사항**:
- [ ] Shop Owner 전용 대시보드 API
  - GET `/api/shop/dashboard` - 대시보드 데이터
  - GET `/api/shop/clinical-stats` - 임상 통계

- [ ] Shop Owner UI 페이지
  - 본인샵 매출 현황
  - 임상 진행 현황
  - CRM 진행 상태 표시
  - 교육 이수 현황

### 4. 고급 리포트 및 분석

#### 4.1 월별 종합 정산 리포트
**현재 상태**: 개별 데이터는 있으나 종합 리포트 없음

**필요한 구현 사항**:
- [ ] 월별 리포트 생성 API
  - POST `/api/reports/monthly` - 월별 리포트 생성
  - GET `/api/reports/monthly/:yearMonth` - 특정 월 리포트 조회

- [ ] 리포트 UI 페이지
  - KOL별 종합 성과 대시보드
  - 전문점별 상세 분석
  - PDF 다운로드 기능

### 5. 알림 시스템 확장

#### 5.1 자동 알림 트리거
**현재 상태**: 기본 알림 시스템만 구현됨

**필요한 구현 사항**:
- [ ] 이벤트 기반 알림 자동화
  - 회원가입 승인 요청 알림
  - CRM 단계 변경 알림
  - 교육 일정 리마인더
  - 수수료 지급 완료 알림
  - 임상 회차 등록 알림

### 6. 데이터 동기화 및 무결성

#### 6.1 Supabase-Xano 양방향 동기화
**현재 상태**: 단방향 연동만 구현

**필요한 구현 사항**:
- [ ] 실시간 데이터 동기화 시스템
  - Webhook 기반 실시간 동기화
  - 데이터 충돌 해결 메커니즘
  - 동기화 실패 시 재시도 로직

### 7. 고급 권한 관리

#### 7.1 세분화된 권한 시스템
**현재 상태**: 기본 role 기반 권한만 구현

**필요한 구현 사항**:
- [ ] 기능별 세부 권한 설정
  - 데이터 조회/수정 권한 분리
  - 부분 관리자 권한 지원
  - 임시 권한 부여 기능

## 구현 우선순위

### Phase 1 (긴급 - 1개월 내)
1. CRM 카드 시스템 구현
2. 셀프성장 카드 시스템 구현
3. Shop Owner 대시보드 구현

### Phase 2 (중요 - 2개월 내)
1. 교육 관리 시스템 구현
2. 월별 종합 정산 리포트
3. 자동 알림 시스템 확장

### Phase 3 (개선 - 3개월 내)
1. Supabase-Xano 양방향 동기화
2. 고급 권한 관리 시스템
3. 성능 최적화 및 확장성 개선

## 기술 스택 및 구현 가이드

### API 개발
- Next.js App Router 사용
- TypeScript 필수
- Zod를 통한 입력 검증
- 에러 핸들링 표준화

### 프론트엔드
- React 18+ 
- Tailwind CSS
- shadcn/ui 컴포넌트
- React Query for 데이터 페칭

### 데이터베이스
- Supabase (PostgreSQL) - 메인 데이터베이스
- Xano - 보조 데이터베이스 및 워크플로우
- Prisma ORM 사용 권장

### 인증 및 권한
- Clerk 인증 시스템 활용
- Role 기반 접근 제어
- API 레벨 권한 검증

## 예상 리소스 및 일정

### 개발 리소스
- 풀스택 개발자 2-3명
- UI/UX 디자이너 1명
- QA 테스터 1명

### 예상 일정
- Phase 1: 4-6주
- Phase 2: 6-8주
- Phase 3: 4-6주

총 예상 기간: 14-20주 (3.5-5개월)

## 성공 지표

1. **기능 완성도**
   - 모든 비즈니스 규칙 구현 완료
   - 사용 시나리오 100% 커버

2. **사용성**
   - 페이지 로딩 시간 < 2초
   - 사용자 만족도 > 85%

3. **안정성**
   - 시스템 가용성 > 99.5%
   - 데이터 무결성 100% 보장

4. **확장성**
   - 동시 사용자 1,000명 이상 지원
   - 월별 데이터 처리량 100만 건 이상

## 위험 요소 및 대응 방안

1. **데이터 동기화 복잡성**
   - 위험: Supabase-Xano 간 데이터 불일치
   - 대응: 트랜잭션 기반 동기화, 정기 무결성 검사

2. **성능 저하**
   - 위험: 대량 데이터 처리 시 속도 저하
   - 대응: 인덱싱 최적화, 캐싱 전략, 페이지네이션

3. **보안 취약점**
   - 위험: 권한 우회, 데이터 유출
   - 대응: 철저한 권한 검증, 감사 로그, 정기 보안 점검

## 결론

BIOFOX KOL 시스템은 기본적인 매출 및 수수료 관리 기능은 잘 구현되어 있으나, CRM 및 교육 관리 등 핵심 비즈니스 프로세스를 지원하는 기능들이 미구현 상태입니다. 

Phase 1의 CRM 시스템 구현이 가장 시급하며, 이를 통해 KOL과 Shop Owner 간의 원활한 소통과 관리가 가능해질 것입니다. 전체 구현이 완료되면 BIOFOX의 비즈니스 프로세스를 완전히 디지털화하여 효율성과 투명성을 크게 향상시킬 수 있을 것으로 예상됩니다.