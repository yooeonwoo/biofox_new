# BIOFOX KOL 프로젝트 구현 순서 계획

본 문서는 BIOFOX KOL 프로젝트의 구현 순서와 일정을 정의합니다. PRD 및 요구사항 명세서를 기반으로 작성되었으며, 프로젝트의 효율적인 진행을 위한 가이드라인을 제공합니다.

## 1. 구현 개요

**BIOFOX KOL**은 본사와 KOL(Key Opinion Leader) 간의 매출/수당 관리를 자동화하는 시스템입니다. 주요 목표는 다음과 같습니다:

- **주문 → 매출 → 수당** 프로세스 자동화
- 본사-KOL 간 데이터 투명성 확보
- 실시간 정보 확인을 통한 업무 효율 극대화

## 2. 기술 스택

- **프론트엔드**: Next.js (App Router), TypeScript, TailwindCSS, ShadCN UI
- **백엔드**: Next.js (Route Handler), Drizzle ORM
- **인증**: Clerk
- **데이터베이스**: Supabase (PostgreSQL)
- **자동화**: n8n
- **이커머스 연동**: Cafe24 API
- **배포**: Vercel

## 3. 구현 단계 및 일정

프로젝트 구현은 총 4개의 스프린트와 베타 테스트, 정식 출시로 나누어 진행됩니다. 각 스프린트는 2주로 구성됩니다.

### 스프린트 1: 기반 설정 및 인증 시스템 구축

**기간**: 2주

**목표**: 프로젝트 기본 구조 설정, 인증 시스템 구축, DB 스키마 정의

**세부 작업**:
1. 프로젝트 초기 설정
   - Next.js 설정 (TypeScript, TailwindCSS, ESLint)
   - 기본 폴더 구조 생성
   - GitHub 저장소 설정 (브랜치 전략 적용)
   - CI/CD 파이프라인 구성 (Vercel 배포)

2. 데이터베이스 스키마 설계
   - Drizzle ORM 스키마 정의 (users, kol, shops, products, devices, orders, commissions)
   - 마이그레이션 설정
   - Supabase 연결 설정

3. 인증 시스템 구현
   - Clerk 설정 및 연동
   - 화이트리스트 이메일 정책 구현
   - 권한 검증 메커니즘 (본사/KOL 권한 분리)
   - 인증 미들웨어 구현

4. 기본 레이아웃 및 디자인 시스템
   - ShadCN UI 컴포넌트 설정
   - 글로벌 레이아웃 구성 (헤더, 푸터, 사이드바)
   - 디자인 가이드에 따른 테마 설정 (컬러, 타이포그래피)

### 스프린트 2: KOL/전문점 관리 및 Cafe24 연동

**기간**: 2주

**목표**: KOL/전문점 관리 기능 구현, Cafe24 API 연동, n8n 워크플로우 기본 구성

**세부 작업**:
1. KOL 관리 기능
   - KOL 등록/수정/삭제 UI 및 API
   - KOL 목록 조회 및 검색
   - KOL 상세 정보 조회

2. 전문점 관리 기능
   - 전문점 등록/수정/삭제 UI 및 API
   - 전문점 목록 조회 및 검색
   - KOL-전문점 관계 관리

3. Cafe24 API 연동
   - API 연결 및 인증 설정
   - 주문 정보 조회 기능 구현
   - 테스트 환경 구축

4. n8n 워크플로우 기본 구성
   - n8n 서버 설정
   - Cafe24 → n8n 웹훅 설정
   - 기본 데이터 변환 로직 구현

### 스프린트 3: 대시보드 및 수당 계산 로직

**기간**: 2주

**목표**: 대시보드 구현, 수당 계산 로직 완성, 자동화 파이프라인 완성

**세부 작업**:
1. 본사 대시보드
   - 전체 매출 추이 차트
   - KOL별 매출/수당 요약
   - 전문점 현황
   - 최근 주문 내역
   - 정산 상태 표시

2. KOL 대시보드
   - 개인 매출/수당 요약
   - 소속 전문점 매출 집계
   - 예상 수당 계산기
   - 기간별 조회 기능

3. 수당 계산 로직 완성
   - 기기 누적 대수에 따른 수당 계산 (4대 이하 150만원, 5대 이상 250만원)
   - 일반 제품 매출의 30% 수당 계산
   - 전문점-KOL 연계 수당 처리

4. n8n 자동화 파이프라인 완성
   - Cafe24 → n8n → Supabase 전체 파이프라인 구축
   - 오류 처리 및 재시도 로직
   - 실시간 데이터 동기화 테스트

### 스프린트 4: 정산 기능 및 알림 시스템

**기간**: 2주

**목표**: 정산 기능 구현, 알림 시스템 구축, 최종 테스트 및 버그 수정

**세부 작업**:
1. 정산 기능 (본사)
   - 수동 정산 처리 UI 및 API
   - 정산 이력 관리
   - 정산 상태 업데이트 메커니즘

2. 알림 시스템
   - 실시간 알림 구현 (Supabase Realtime 활용)
   - 알림 센터 UI
   - 주문/정산 관련 알림 로직

3. 관리자 기능 강화
   - 화이트리스트 이메일 관리 UI
   - 사용자 권한 관리
   - 시스템 설정 관리

4. 최종 테스트 및 버그 수정
   - 전체 기능 테스트
   - 성능 최적화
   - UI/UX 개선
   - 사용자 피드백 반영

### 베타 테스트

**기간**: 1개월

**목표**: 실제 KOL 대상 파일럿 운영, 피드백 수렴 및 개선

**세부 작업**:
1. 주요 사용자(KOL) 대상 베타 버전 공개
2. 사용자 피드백 수집 및 분석
3. 우선순위에 따른 개선 작업
4. 성능 튜닝 및 안정화
5. 사용성 테스트 및 UX 개선

### 정식 출시

**기간**: 베타 이후

**목표**: 모든 사용자 대상 서비스 오픈, 모니터링 및 지속적 개선

**세부 작업**:
1. 전체 사용자 대상 서비스 오픈
2. 사용 가이드 및 문서화
3. 모니터링 시스템 고도화
4. 지속적인 기능 개선 및 유지보수
5. 추가 기능 요구사항 수집 및 계획

## 4. 우선순위 및 의존성

### 핵심 기능 (MVP)
1. 화이트리스트 회원가입/로그인, 권한 분기(본사/KOL)
2. KOL/전문점 등록 & 관리
3. Cafe24 → 주문 연동 + n8n 자동 수당 계산
4. 본사/KOL 대시보드
5. 수동 정산 기능

### 의존성 관계
- 인증 시스템은 모든 기능의 기반이 되므로 최우선 구현
- KOL/전문점 관리는 대시보드 구현 전에 완료되어야 함
- Cafe24 연동과 수당 계산 로직은 대시보드 데이터 표시를 위해 선행되어야 함
- 정산 기능과 알림 시스템은 핵심 기능 구현 후 추가

## 5. 기술적 고려사항

### 성능 최적화
- 대시보드 데이터 로딩 최적화 (서버 컴포넌트, 증분 정적 재생성 활용)
- 데이터베이스 쿼리 최적화 (인덱싱, 캐싱)
- 이미지 및 자산 최적화

### 보안
- HTTPS 적용
- RBAC(Role-Based Access Control) 구현
- API 엔드포인트 보안
- 데이터 암호화 (민감 정보)

### 확장성
- 모듈식 설계로 추후 기능 확장 용이하게 구성
- 다중 이커머스 플랫폼 연동 고려
- 국제화(i18n) 지원 가능성 고려

## 6. 테스트 전략

### 유닛 테스트
- Jest를 활용한 주요 함수 및 컴포넌트 테스트
- 수당 계산 로직, 권한 검증 로직 등 핵심 비즈니스 로직 중점 테스트

### 통합 테스트
- API 엔드포인트 테스트
- Cafe24 → n8n → Supabase 파이프라인 테스트
- 인증 플로우 테스트

### E2E 테스트
- Cypress를 활용한 주요 사용자 시나리오 테스트
- 회원가입 → 로그인 → 대시보드 접근 등 핵심 플로우 테스트

## 7. 문서화 계획

### 개발자 문서
- 아키텍처 다이어그램
- API 문서
- 컴포넌트 라이브러리 (Storybook)
- 설치 및 배포 가이드

### 사용자 문서
- 관리자 사용 매뉴얼
- KOL 사용 가이드
- FAQ

## 8. 리스크 관리

### 잠재적 리스크
- Cafe24 API 변경/제한
- n8n 사용료 또는 Supabase 요금 초과
- 복잡한 KOL-전문점 관계 구조 처리

### 대응 방안
- API 변경 모니터링 및 빠른 대응
- 비용 예측 및 대안 검토
- 데이터 모델 유연성 확보

## 9. 결론

이 구현 계획은 BIOFOX KOL 프로젝트의 효율적인 진행을 위한 로드맵입니다. 각 스프린트의 목표와 작업 항목을 중심으로 개발을 진행하되, 사용자 피드백과 비즈니스 요구사항에 따라 유연하게 조정할 필요가 있습니다. 특히 MVP(최소 기능 제품) 기능을 우선적으로 구현하여 빠른 시일 내에 사용 가능한 제품을 제공하는 것이 중요합니다. 