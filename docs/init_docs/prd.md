아래는 **BIOFOX KOL** 프로젝트 요구사항을 바탕으로 작성한 **PRD(Product Requirements Document)** 예시입니다. 실제 업무 환경이나 팀 문화에 따라 템플릿을 **추가/수정**할 수 있으므로 참고용으로 활용하시길 권장드립니다.

---

# PRD (Product Requirements Document) - BIOFOX KOL

## 1. 프로젝트 개요

- **프로젝트명**: BIOFOX KOL  
- **목적**:  
  - **본사**에서 KOL(Key Opinion Leader) 및 전문점 정보를 등록·관리하고, 매출·수당을 실시간으로 확인/정산할 수 있도록 함  
  - **KOL**이 본인의 매출·수당과 소속 전문점 매출 현황을 직관적으로 파악할 수 있는 대시보드 제공  
- **핵심 가치**:  
  - **주문 → 매출 → 수당** 프로세스를 **자동화**하여, **수기 엑셀 관리**의 비효율성과 **인적 오류**를 최소화  
  - 본사-KOL 간 데이터 **투명성** 확보, 실시간 정보 확인을 통한 **업무 효율 극대화**

---

## 2. 배경 및 문제 정의

1. **기존 문제**  
   - 다양한 KOL/전문점의 매출을 개별로 집계하는 과정에서 **오류**가 발생  
   - **중복 기록** 및 **실시간 반영 안 됨** → 정산 시점에 혼선  
   - 전문점→KOL→본사 간 매출/수당 관리에 **수작업(엑셀)** 의존  
2. **해결하고자 하는 목표**  
   - **Cafe24**(쇼핑몰 플랫폼) 주문을 자동으로 가져와, **n8n** 워크플로우에서 매출/수당 계산 후, **Supabase** DB에 반영  
   - **Next.js(프론트) + Clerk(인증)** 기반으로, 권한별로 대시보드를 제공 → 본사, KOL의 **실시간 조회** 가능  

---

## 3. 제품 비전 & 목표

1. **비전**  
   - **BIOFOX KOL**을 통해 본사와 KOL 모두 **투명하고 효율적인 매출/수당 관리**를 경험하게 하고,  
   - 전문점 확장 시에도 **스케일러블**하게 대응할 수 있는 플랫폼을 구축한다.
2. **정량적 목표**  
   - **오류율 80% 이상 감소** (수기 작업 대비)  
   - **시간 절감 50%** 이상 (수당 정산·매출 집계 업무 자동화)  
   - **시스템 안정성**: 주문 발생 시 99% 이상 성공적으로 매출 DB에 반영  

---

## 4. 대상 사용자 및 페르소나

1. **본사 관리자**  
   - **니즈**: KOL/전문점 등록, 매출 현황, 정산 관리, 알림 확인  
   - **활용 장면**: 일일 매출 모니터링, 수당 정산 처리(수동/자동), KOL 정보 관리  
2. **KOL**  
   - **니즈**: 본인 매출·수당 확인, 소속 전문점 매출 현황 확인, 실시간 알림  
   - **활용 장면**: 매출 트렌드 파악, 정산 금액 조회, 전문점별 매출 편차 분석  
3. **전문점**  
   - **로그인 없음**: 본사에서 등록만. 매출 정보는 KOL에게만 수당 계산 반영  
   - (추후) 전문점용 페이지 필요 시 확장 검토

---

## 5. 주요 기능 요약

1. **회원가입 / 로그인**  
   - 화이트리스트(본사 등록 이메일)만 가입 가능, Clerk 인증 연동  
   - 권한(Role)에 따라 다르게 리다이렉트 (본사 / KOL)  
2. **KOL 및 전문점 관리**  
   - KOL: 원장님 이름, 샵 이름, 이메일, 전화번호, 소속 전문점 목록  
   - 전문점: 전문점 이름, 원장명, 소속 KOL  
   - 본사 관리자만 등록/수정/삭제 가능  
3. **Cafe24 → n8n → Supabase 연동**  
   - **자동 주문 동기화**: 주문 발생 시 n8n 웹훅/이벤트  
   - **매출/수당 계산 로직**  
     - 기기: 누적 4대 이하 → 대당 150만 원, 5대 이상 → 대당 250만 원  
     - 제품: 매출의 30%를 수당으로  
     - 전문점은 매출만 표시, KOL에만 수당 반영  
4. **대시보드**  
   - **본사 대시보드**: 전체 매출 추이, KOL별 매출·수당 요약, 전문점 현황, 최근 주문, 정산 상태  
   - **KOL 대시보드**: 본인 매출·수당, 소속 전문점 별 매출, 알림, 예상 수당(정산 전)  
   - 정산 상태(완료/미완료) 시각화, 기간별 필터, 검색/정렬  
5. **정산 기능(본사 관리)**  
   - 수동 정산 시 지급 일자, 금액, 계좌 정보, 메모 등 기록  
   - 지급 완료 표시 시 이력 저장  
6. **알림/공지**  
   - 본사 & KOL: 주문 발생, 정산 상태 변경 등 실시간 알림  
   - 공지사항 게시(내부 알림)  

---

## 6. 상세 요구사항

### 6.1 기능 요구사항

| 분류         | 요구사항 명                        | 상세 내용                                                                                                  | 우선순위 |
|--------------|-----------------------------------|-----------------------------------------------------------------------------------------------------------|----------|
| 회원가입/로그인 | RQ-1 화이트리스트 인증               | 본사에서 등록한 이메일로만 회원가입 가능, Clerk 연동                                                         | HIGH     |
| 회원가입/로그인 | RQ-2 권한별 페이지 분기              | 본사 관리자/ KOL 로그인 시 대시보드 경로가 다름                                                                | HIGH     |
| KOL/전문점 관리 | RQ-3 KOL 등록/수정/삭제             | 이름, 샵 이름, 이메일, 소속 전문점 목록 등 입력. 본사 관리자만 가능                                            | HIGH     |
| KOL/전문점 관리 | RQ-4 전문점 등록/수정/삭제           | 전문점 이름, 원장님 이름, 소속 KOL 설정. 본사 관리자만 가능                                                    | HIGH     |
| 매출/수당 계산   | RQ-5 Cafe24 주문 데이터 수집         | n8n 웹훅으로 실시간 받아 Supabase DB 저장                                                                    | HIGH     |
| 매출/수당 계산   | RQ-6 기기/제품 수당 계산 로직         | 기기 4대 이하(150만 원/대), 5대 이상(250만 원/대), 제품(매출 × 30%)                                            | HIGH     |
| 대시보드        | RQ-7 본사 대시보드                    | 전체 매출 추이, KOL별 매출/수당, 전문점 현황, 최근 주문, 정산 상태, 필터/검색                                 | HIGH     |
| 대시보드        | RQ-8 KOL 대시보드                     | 본인 매출/수당, 전문점 매출, 알림, 예상 수당, 기간별 필터                                                     | HIGH     |
| 정산           | RQ-9 수동 정산 기능                    | 본사에서 지급 처리(일자, 금액, 계좌) 입력 → 정산 완료 상태 반영                                               | MEDIUM   |
| 알림/공지      | RQ-10 실시간 알림/공지                 | 주문 발생, 정산 상태 변경 시 KOL 및 본사 관리자 알림                                                          | MEDIUM   |
| 관리자 기능     | RQ-11 회원 관리 UI                    | 화이트리스트 이메일 등록/삭제, 계정 권한 변경 등 (본사만)                                                     | MEDIUM   |
| ...           | ...                                   | ...                                                                                                        | ...      |

### 6.2 비기능 요구사항

| 분류          | 요구사항 명                | 상세 내용                                                                  | 우선순위 |
|---------------|---------------------------|---------------------------------------------------------------------------|----------|
| 보안          | RNF-1 HTTPS / RBAC       | 모든 통신 HTTPS, 역할(Role) 기반 권한 부여                                 | HIGH     |
| 성능          | RNF-2 주문 동기화 속도     | 주문 발생 후 1분 내(또는 실시간)에 대시보드 반영                           | MEDIUM   |
| 가용성        | RNF-3 장애 대응 방안       | Cafe24 API/n8n 다운 시 재시도 로직, Supabase 백업 주기                     | MEDIUM   |
| 모니터링/로그 | RNF-4 에러 추적            | Sentry(또는 유사 도구)로 프론트/백엔드 오류 모니터링, n8n 실행 로그 확인   | MEDIUM   |
| CI/CD         | RNF-5 브랜치 전략, 배포    | GitHub Flow 또는 Minimal Feature Branch → Vercel 배포 파이프라인 자동화   | MEDIUM   |
| ...           | ...                       | ...                                                                       | ...      |

---

## 7. 사용자 시나리오 (User Story)

1. **본사 관리자가 KOL 등록**  
   - “본사 관리자” 권한으로 로그인 → “KOL 관리” 메뉴 → “신규 KOL 등록” 버튼 클릭  
   - (필수) 원장님 이름, 샵 이름, 이메일 입력 → “등록” → DB 저장 & 화이트리스트 이메일 자동 추가  
   - 등록된 KOL 계정이 Clerk 인증 후 로그인이 가능해짐  
2. **KOL이 로그인 후 대시보드 확인**  
   - 등록된 이메일로 로그인 → 권한=KOL → KOL 대시보드로 자동 이동  
   - KOL 대시보드에서 “소속 전문점 매출”, “본인 수당 합계”, “최근 주문” 등 데이터 확인  
3. **Cafe24에서 주문 발생 → 자동 수당 계산**  
   - 고객이 Cafe24 쇼핑몰에서 기기 2대, 제품 3개를 구매 → 결제 완료  
   - Cafe24 API → n8n → “누적 기기 2대 → 대당 150만 원, 제품 매출 3개*단가×0.3” 계산 → Supabase 반영  
   - KOL 대시보드에 즉시 해당 매출/수당 추가 반영  
4. **본사에서 수당 정산 완료 처리**  
   - “정산 관리” 페이지에서 특정 KOL 선택 → “정산” 버튼 → 지급 금액, 일자, 계좌 입력  
   - 상태가 “정산 완료”로 바뀌면서, 히스토리에 기록 & KOL에게 알림 발송  

---

## 8. 주요 지표 (Success Metrics)

1. **오류율**  
   - (개발 전) 수기 정산 방식 대비 **오류(수당 미일치) 건수**를 80% 이상 감소  
2. **주문 처리 소요 시간**  
   - 주문→DB 반영에 걸리는 시간 **1분 이내** (실시간에 가까운 속도)  
3. **업무 효율**  
   - 본사 정산/매출 관리 업무량을 기존 대비 **50% 절감** (수기로 처리하던 작업 감소)  
4. **시스템 가동률**  
   - 연간 99% 이상 가동 (장애·다운타임 최소화)

---

## 9. 제품 범위 (Scope) 및 우선순위

1. **MVP (최소 기능 제품)**  
   - 화이트리스트 회원가입/로그인, 본사/KOL 권한 구분  
   - KOL/전문점 등록, Cafe24 주문 연동, 수당 계산 로직(기기/제품 구분)  
   - 본사 대시보드(기본), KOL 대시보드(기본), 수동 정산 관리(기본)  
2. **추후 확장 기능**  
   - 전문점 로그인/페이지 구현, 고급 통계/리포트(차트/분석), 푸시 알림, 멀티 이커머스(Shopify 등)  

---

## 10. 타임라인 & 마일스톤

| 마일스톤          | 기간                | 주요 작업                                           |
|-------------------|---------------------|------------------------------------------------------|
| **스프린트 1**    | 2주                | - DB 스키마 정의 & Clerk 인증 설정<br/>- 회원가입(화이트리스트), 권한 분기 로직 구현 |
| **스프린트 2**    | 2주                | - Cafe24 API & n8n 연동 PoC<br/>- KOL/전문점 관리 화면 개발 |
| **스프린트 3**    | 2주                | - 대시보드(본사/KOL) 1차 구현<br/>- 수당 계산 로직(기기/제품) 완성 |
| **스프린트 4**    | 2주                | - 정산(수동) 기능, 알림/공지 기능<br/>- 기초 테스트 & 버그 수정 |
| **베타 테스트**   | 1개월 (TBD)         | - 실제 KOL 대상 파일럿 운영<br/>- 성능 튜닝, UX 개선, 버그 수정        |
| **정식 출시**     | 베타 이후 (TBD)     | - 고도화, 모니터링 설정, 문서화 & 유지보수 방안                      |

---

## 11. 리스크 & 가정(Assumptions)

1. **리스크**  
   - Cafe24 API 정책(제한, 변경)에 따라 주문 연동 불안정 발생 가능  
   - n8n 사용료(유료 플랜) 또는 Supabase 요금 초과 시 예산 부담  
   - KOL이 여러 전문점을 중복 소유하거나 순환 관계(다른 KOL 소속)가 늘어날 경우 DB 설계 복잡  
2. **가정**  
   - 본사 측에서 **화이트리스트 이메일 등록**을 통해 KOL 정보를 사전에 확보하고 있음  
   - 기기/제품 수당 계산 공식은 당분간 변경 없을 것  
   - 전문점은 로그인 기능이 없으며, 별도의 주문 관리 권한을 부여하지 않아도 됨  

---

## 12. 의존성(Dependencies)

1. **Cafe24 API**  
   - 주문/결제 상태를 실시간(or 웹훅)으로 제공  
2. **n8n 워크플로우**  
   - Cafe24 → Supabase 자동화 파이프라인  
   - 오류/재시도 로직, 비용(서버 운영)  
3. **Clerk**  
   - 인증/권한 관리 (Role-based Access)  
4. **Supabase**  
   - DB(매출, 수당, 사용자, 전문점 등) / Auth 일부 / Realtime 기능  
5. **Vercel**  
   - Next.js 호스팅, CI/CD

---

## 13. 오픈 이슈(미결 사항)

1. **정산 주기**: 주문 발생 시 자동 반영 → 실제 지급(수동 정산) 과정 중 발생할 수 있는 예외 상황(부분 취소, 환불 등)에 대한 처리 룰 확정 필요  
2. **알림 구현 방식**: Pusher/Supabase Realtime/WebSocket 등 구체적인 기술 스택 미정  
3. **데이터 정확성 보장**: KOL이 기기 여러 대를 따로 주문한 경우 누적 개수 계산 로직 상세 설계(4대 이하, 5대 이상 기준) → n8n 편에서 처리 or DB 트리거 처리?  
4. **디자인/UI**: 최종적인 UI/UX 시안(Figma 등)과 컴포넌트 라이브러리(Storybook 등) 적용 시점 미정

---

## 14. 결론

이 PRD는 **BIOFOX KOL** 프로젝트의 **목표, 주요 요구사항, 사용자 시나리오, 타임라인, 리스크** 등을 종합한 문서로,  
실제 개발 과정에서 **스프린트별 세부 계획**과 **설계/테스트 결과**에 따라 **유연하게 업데이트**될 예정입니다.  
- **핵심**은 **본사와 KOL 간의 매출/수당 관리 자동화**로,  
- **Cafe24 → n8n → Supabase** 데이터 파이프라인을 성공적으로 구축하고,  
- **Next.js + Clerk**를 활용해 직관적인 대시보드를 제공함으로써,  
프로젝트 목표인 **업무 효율 및 정확도 향상**을 달성하는 것을 지향합니다.

**의견 및 변경 사항**은 해당 문서를 중심으로 공유·논의하여, 모든 이해관계자가 동일한 방향으로 개발을 진행할 수 있도록 관리합니다.

---

*이상으로 **BIOFOX KOL** 프로젝트의 **PRD** 초안입니다. 필요에 따라 세부 항목(디자인 시안, 기술 아키텍처 다이어그램, 테스트 전략 등)을 보강해 가며 문서를 발전시키길 권장드립니다.*